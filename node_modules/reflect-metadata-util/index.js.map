{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["import 'reflect-metadata';\n\nexport type IPropertyKey = string | symbol;\n\n/**\n * use for class, member, decorators\n */\nexport function getMemberMetadata<T extends any>(metadataKey: any, target: object, propertyKey?: IPropertyKey): T\n{\n\treturn Reflect.getMetadata(metadataKey, target, propertyKey)\n}\n\nexport function hasMemberMetadata<T extends any>(metadataKey: any, target: object, propertyKey?: IPropertyKey)\n{\n\treturn Reflect.hasMetadata(metadataKey, target, propertyKey)\n}\n\n/**\n * use for class, member, decorators\n */\nexport function setMemberMetadata(metadataKey: any, metadataValue: any, target: object, propertyKey?: IPropertyKey)\n{\n\treturn Reflect.defineMetadata(metadataKey, metadataValue, target, propertyKey)\n}\n\n/**\n * use for constructor, member, decorators\n */\nexport function getPrototypeOfMetadata<T extends any>(metadataKey: any,\n\ttarget: object,\n\tpropertyKey?: IPropertyKey,\n): T\n{\n\treturn Reflect.getMetadata(metadataKey, getPrototypeOfConstructor(target), propertyKey)\n}\n\nexport function hasPrototypeOfMetadata<T extends any>(metadataKey: any, target: object, propertyKey?: IPropertyKey)\n{\n\treturn Reflect.hasMetadata(metadataKey, getPrototypeOfConstructor(target), propertyKey)\n}\n\n/**\n * use for constructor, member, decorators\n */\nexport function setPrototypeOfMetadata(metadataKey: any,\n\tmetadataValue: any,\n\ttarget: object,\n\tpropertyKey?: IPropertyKey,\n)\n{\n\treturn Reflect.defineMetadata(metadataKey, metadataValue, getPrototypeOfConstructor(target), propertyKey)\n}\n\nexport function getMetadataLazy<T extends any>(metadataKey: any, target: object, propertyKey?: IPropertyKey): T\n{\n\tif (hasMemberMetadata(metadataKey, target, propertyKey))\n\t{\n\t\treturn getMemberMetadata(metadataKey, target, propertyKey)\n\t}\n\n\treturn getPrototypeOfMetadata(metadataKey, target, propertyKey)\n}\n\nexport function getMetadataPropertyFirst<T extends any>(metadataKey: any, target: object, propertyKey: IPropertyKey): T\n{\n\tlet ret = getMetadataLazy(metadataKey, target, propertyKey);\n\n\tif (typeof ret !== 'undefined')\n\t{\n\t\t// @ts-ignore\n\t\treturn ret;\n\t}\n\n\treturn getMetadataLazy(metadataKey, target)\n}\n\n/**\n * same as getMetadata, but get top metadata first\n */\nexport function getMetadataTopFirst<T extends any>(metadataKey: any, target: object, propertyKey?: IPropertyKey): T\n{\n\tif (hasPrototypeOfMetadata(metadataKey, target, propertyKey))\n\t{\n\t\treturn getPrototypeOfMetadata(metadataKey, target, propertyKey)\n\t}\n\n\treturn getMemberMetadata(metadataKey, target, propertyKey)\n}\n\nexport function getPrototypeOfConstructor(target: object)\n{\n\treturn Reflect.getPrototypeOf(target).constructor\n}\n\nexport interface IParameterDecorator<K extends IPropertyKey = IPropertyKey, T extends object = object>\n{\n\t(target: T, propertyKey: K, parameterIndex: number): void\n}\n\nexport function buildParameterDecorator<K extends IPropertyKey = IPropertyKey, T extends object = object>(fn: IParameterDecorator<K, T>): IParameterDecorator<K, T>\n{\n\tif (typeof fn !== 'function')\n\t{\n\t\tthrow new TypeError(`fn not a IParameterDecorator`)\n\t}\n\n\treturn function (target: T, propertyKey: K, parameterIndex: number)\n\t{\n\t\treturn fn(target, propertyKey, parameterIndex)\n\t}\n}\n"]}