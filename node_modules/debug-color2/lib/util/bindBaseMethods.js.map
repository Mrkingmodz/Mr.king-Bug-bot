{"version":3,"file":"bindBaseMethods.js","sourceRoot":"","sources":["bindBaseMethods.ts"],"names":[],"mappings":";;;;AAAA;;GAEG;AACH,gEAA+B;AAC/B,oDAA2C;AAC3C,gCAAkC;AAGlC,SAAS,IAAI,CAAqB,MAAgB,EAAE,IAAO;IAE1D,IAAI,KAAK,GAAgB,MAAM,CAAC,IAAI,CAAC,CAAC;IAEtC,IAAI,EAAE,GAAgB,UAA0B,GAAG,IAAW;QAE7D,IAAI,IAAI,GAAa,IAAI,CAAC;QAE1B,IAAI,IAAI,YAAY,cAAQ,EAC5B;YACC,IAAI,GAAG,IAAI,CAAA;SACX;aACI,IAAI,OAAO,IAAI,KAAK,WAAW,EACpC;YACC,IAAI,GAAG,IAAI,CAAA;SACX;aACI,IAAI,EAAE,CAAC,cAAQ,CAAC,EACrB;YACC,IAAI,GAAG,EAAE,CAAC,cAAQ,CAAC,CAAA;SACnB;QAED,aAAa;QACb,OAAO,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;IAC/B,CAAC,CAAA;IAED,WAAW,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;IAExB,MAAM,CAAC,cAAc,CAAC,EAAE,EAAE,MAAM,EAAE;QACjC,KAAK,EAAE,IAAI;QACX,UAAU,EAAE,KAAK;KACjB,CAAC,CAAA;IAEF,OAAO,EAAE,CAAA;AACV,CAAC;AAED,SAAgB,WAAW,CAAC,MAAM,EAAE,EAAE;IAErC,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,cAAQ,EAAE;QACvC,GAAG;YAEF,OAAO,EAAE,CAAA;QACV,CAAC;QACD,UAAU,EAAE,KAAK;KACjB,CAAC,CAAA;IAEF,OAAO,MAAM,CAAA;AACd,CAAC;AAXD,kCAWC;AAED,SAAgB,eAAe,CAAC,MAAM;IAErC,uBAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;QACnB,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAA;IAC5B,CAAC,CAAC,CAAA;IAEF,OAAO,MAAM,CAAA;AACd,CAAC;AAPD,0CAOC","sourcesContent":["/**\n * Created by user on 2021/7/10.\n */\nimport Console2 from '../node';\nimport { methods } from '../fill-property';\nimport { SYM_THIS } from '../val';\nimport { IMethods } from '../types/CrossConsole';\n\nfunction _get<P extends IMethods>(target: Console2, name: P): Console2[P]\n{\n\tlet oldFn: Console2[P] = target[name];\n\n\tlet fn: Console2[P] = function (this: Console2, ...argv: any[])\n\t{\n\t\tlet self: Console2 = this;\n\n\t\tif (this instanceof Console2)\n\t\t{\n\t\t\tself = this\n\t\t}\n\t\telse if (typeof this !== 'undefined')\n\t\t{\n\t\t\tself = this\n\t\t}\n\t\telse if (fn[SYM_THIS])\n\t\t{\n\t\t\tself = fn[SYM_THIS]\n\t\t}\n\n\t\t// @ts-ignore\n\t\treturn oldFn.apply(self, argv)\n\t}\n\n\tsetBindThis(fn, target);\n\n\tObject.defineProperty(fn, 'name', {\n\t\tvalue: name,\n\t\tenumerable: false,\n\t})\n\n\treturn fn\n}\n\nexport function setBindThis(target, me)\n{\n\tObject.defineProperty(target, SYM_THIS, {\n\t\tget()\n\t\t{\n\t\t\treturn me\n\t\t},\n\t\tenumerable: false,\n\t})\n\n\treturn target\n}\n\nexport function bindBaseMethods(target)\n{\n\tmethods.forEach(m => {\n\t\ttarget[m] = _get(target, m)\n\t})\n\n\treturn target\n}\n"]}