{"version":3,"file":"cookies.js","sourceRoot":"","sources":["cookies.ts"],"names":[],"mappings":";;;AAAA;;GAEG;AACH,mCAAwD;AAGxD,iEAAiG;AACjG,iCAA8C;AAC9C,+CAAgF;AAEhF,SAAgB,gBAAgB,CAAC,KAA4C;IAE5E,IAAI,KAAK,KAAK,IAAI,EAClB;QACC,aAAa;QACb,KAAK,GAAG,IAAI,4BAAa,EAAE,CAAC;KAC5B;IAED,OAAO,IAAA,sBAAc,EAAC;QACrB,aAAa;QACb,GAAG,EAAE,KAAK;QACV,eAAe,EAAE,IAAI;KACrB,CAAC,CAAA;AACH,CAAC;AAbD,4CAaC;AAED,SAAgB,UAAU,CAAmB,IAA2B,EAAE,GAAkB;IAE3F,OAAO,UAAU,MAAW,EAAE,YAA2B;QAExD,MAAM,GAAG,GAAG,YAAY,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC;QAE/C,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAA;IACvB,CAAC,CAAA;AACF,CAAC;AARD,gCAQC;AAED,SAAgB,YAAY,CAAC,MAAW,EAAE,YAA2B;IAEpE,IAAI,MAAM,GAAG,IAAA,uCAAe,EAAC,gBAAS,EAAE,MAAM,EAAE,YAAY,CAAuB,CAAC;IAEpF,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,GAAG,EAC1B;QACC,MAAM,GAAG,IAAA,uCAAe,EAAC,gBAAS,EAAE,MAAM,CAAC,CAAA;KAC3C;IAED,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,GAAG,EAC1B;QACC,MAAM,IAAI,cAAc,CAAC,oCAAoC,CAAC,CAAA;KAC9D;IAED,OAAO,MAAM,CAAC,GAAU,CAAA;AACzB,CAAC;AAfD,oCAeC;AAED,kBAAe,gBAAgB,CAAA","sourcesContent":["/**\n * Created by user on 2019/6/10.\n */\nimport RequestConfig, { RequestConfigs } from './index';\nimport { AxiosRequestConfig } from '../../types/axios';\nimport toughCookie, { CookieJar } from 'tough-cookie';\nimport { getMetadataLazy, getPrototypeOfConstructor, IPropertyKey } from 'reflect-metadata-util';\nimport { getConfig, SymConfig } from './util';\nimport { ICookiesValue, ICookiesValueInput, LazyCookieJar } from 'lazy-cookies';\n\nexport function CookieJarSupport(value: AxiosRequestConfig[\"jar\"] | CookieJar)\n{\n\tif (value === true)\n\t{\n\t\t// @ts-ignore\n\t\tvalue = new LazyCookieJar();\n\t}\n\n\treturn RequestConfigs({\n\t\t// @ts-ignore\n\t\tjar: value,\n\t\twithCredentials: true,\n\t})\n}\n\nexport function SetCookies<T extends string>(data: ICookiesValueInput<T>, url?: string | URL)\n{\n\treturn function (target: any, propertyName?: IPropertyKey)\n\t{\n\t\tconst jar = getCookieJar(target, propertyName);\n\n\t\tjar.setData(data, url)\n\t}\n}\n\nexport function getCookieJar(target: any, propertyName?: IPropertyKey): LazyCookieJar\n{\n\tlet config = getMetadataLazy(SymConfig, target, propertyName) as AxiosRequestConfig;\n\n\tif (!config || !config.jar)\n\t{\n\t\tconfig = getMetadataLazy(SymConfig, target)\n\t}\n\n\tif (!config || !config.jar)\n\t{\n\t\tthrow new ReferenceError(`axios-cookiejar-support not enable`)\n\t}\n\n\treturn config.jar as any\n}\n\nexport default CookieJarSupport\n"]}