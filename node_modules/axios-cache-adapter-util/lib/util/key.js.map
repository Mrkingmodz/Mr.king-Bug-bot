{"version":3,"file":"key.js","sourceRoot":"","sources":["key.ts"],"names":[],"mappings":";;;;AAAA,2DAAqB;AACrB,6DAAoD;AACpD,uCAAkC;AASlC;;;;;GAKG;AACH,SAAgB,gCAAgC,CAAC,GAAuB;IAEvE,MAAM,GAAG,GAAG,IAAI,kBAAO,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC,YAAY,EAAE,CAAC;IAC7D,MAAM,GAAG,GAAG,GAAG,GAAG,IAAA,oCAAc,EAAC,GAAG,CAAC,CAAA;IACrC,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,IAAA,aAAG,EAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAA;AAC5C,CAAC;AALD,4EAKC;AAED,SAAgB,yBAAyB,CAAC,EAAuG;IAEhJ,OAAO,CAAC,GAAuB,EAAE,EAAE;QAClC,OAAO,gCAAgC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAA;IACjD,CAAC,CAAA;AACF,CAAC;AALD,8DAKC","sourcesContent":["import md5 from 'md5'\nimport { serializeQuery } from 'axios-cache-adapter'\nimport { LazyURL } from 'lazy-url'\nimport { AxiosRequestConfig } from 'axios';\nimport { ITSPickExtra, ITSRequiredPick } from 'ts-type/lib/type/record';\n\ndeclare module 'axios-cache-adapter'\n{\n\tfunction serializeQuery(req: Pick<AxiosRequestConfig, 'params'>): string;\n}\n\n/**\n * bug fixed version of key\n *\n * @see https://github.com/RasCarlito/axios-cache-adapter/blob/master/src/cache.js#L66\n * @see https://github.com/RasCarlito/axios-cache-adapter/pull/250\n */\nexport function defaultAxiosCacheAdapterKeyFixed(req: AxiosRequestConfig)\n{\n\tconst url = new LazyURL(req.url, req.baseURL).toRealString();\n\tconst key = url + serializeQuery(req)\n\treturn req.data ? key + md5(req.data) : key\n}\n\nexport function axiosCacheAdapterKeyExtra(cb: (req: AxiosRequestConfig) => ITSPickExtra<AxiosRequestConfig, 'url', 'params' | 'data' | 'baseURL'>)\n{\n\treturn (req: AxiosRequestConfig) => {\n\t\treturn defaultAxiosCacheAdapterKeyFixed(cb(req))\n\t}\n}\n"]}