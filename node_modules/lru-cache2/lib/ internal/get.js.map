{"version":3,"file":"get.js","sourceRoot":"","sources":["get.ts"],"names":[],"mappings":";;;AAAA,sCAA4E;AAC5E,uCAAoC;AACpC,+BAA4B;AAGrB,MAAM,GAAG,GAAG,CAAO,IAAoB,EAAE,GAAM,EAAE,KAAc,EAAE,EAAE;IAEzE,MAAM,IAAI,GAAG,IAAI,CAAC,cAAK,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;IACjC,IAAI,IAAI,EACR;QACC,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAA;QACtB,IAAI,IAAA,iBAAO,EAAC,IAAI,EAAE,GAAG,CAAC,EACtB;YACC,IAAA,SAAG,EAAC,IAAI,EAAE,IAAI,CAAC,CAAA;YACf,IAAI,CAAC,IAAI,CAAC,oBAAW,CAAC,EACtB;gBACC,OAAO,SAAS,CAAA;aAChB;SACD;aAED;YACC,IAAI,KAAK,EACT;gBACC,IAAI,IAAI,CAAC,0BAAiB,CAAC,EAC3B;oBACC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAA;iBAC3B;gBACD,IAAI,CAAC,iBAAQ,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAA;aAChC;SACD;QACD,OAAO,GAAG,CAAC,KAAK,CAAA;KAChB;AACF,CAAC,CAAA;AA3BY,QAAA,GAAG,OA2Bf","sourcesContent":["import { CACHE, ALLOW_STALE, UPDATE_AGE_ON_GET, LRU_LIST } from '../symbol';\nimport { isStale } from './isStale';\nimport { del } from './del';\nimport { LRUCache } from '../LRUCache';\n\nexport const get = <K, V>(self: LRUCache<K, V>, key: K, doUse: boolean) =>\n{\n\tconst node = self[CACHE].get(key)\n\tif (node)\n\t{\n\t\tconst hit = node.value\n\t\tif (isStale(self, hit))\n\t\t{\n\t\t\tdel(self, node)\n\t\t\tif (!self[ALLOW_STALE])\n\t\t\t{\n\t\t\t\treturn undefined\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (doUse)\n\t\t\t{\n\t\t\t\tif (self[UPDATE_AGE_ON_GET])\n\t\t\t\t{\n\t\t\t\t\tnode.value.now = Date.now()\n\t\t\t\t}\n\t\t\t\tself[LRU_LIST].unshiftNode(node)\n\t\t\t}\n\t\t}\n\t\treturn hit.value\n\t}\n}\n"]}